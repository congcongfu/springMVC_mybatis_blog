<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3.0-mapper.dtd">  
<mapper namespace="com.congfu.dao.TagDao">  
  <resultMap id="studentResultMap" type="com.congfu.model.Tag" >
  	<id property="id" column="id"/>
  	<result property="name" column="name"/>
  	<result property="count" column="count" />
  	<result property="isDeleted" column="isDeleted" />
  	<result property="createTime" column="createTime" />
  	<result property="updateTime" column="updateTime" />
  	<result property="createMan" column="createMan" />
  	<result property="updateMan" column="updateMan" />
  </resultMap>
  <!--新增标签信息 -->
  <insert id="insert" parameterType="com.congfu.model.User" useGeneratedKeys="true" keyProperty="id">
  	insert into tag(name,count,isDeleted,createTime,createMan)
  	 values(#{name},#{count},#{isDeleted},now(),#{createMan})
  </insert>
  <!-- 批量插入 -->
<!--   <insert id="batchInsert" parameterType="com.congfu.model.blog.Blog" useGeneratedKeys="true" keyProperty="id">
  	insert into blog(userId,author,title,color,urlName,urlType,content,tags,view,status,publishTime,isDeleted,
  	isTop,createTime,updateTime,createMan,updateMan,version) values
  	<foreach item="item" collection="list" separator=",">
	  (#{userId},#{author},#{title},#{color},#{urlName},#{urlType},#{content},#{tags},#{view},#{status},#{publishTime},#{isDeleted},
	   #{isTop},now(),#{updateTime},#{createMan},#{updateMan},0)
  	</foreach>
  </insert> -->
  <!-- 根据id 查询标签 -->
   <select id="findById" parameterType="Long" resultType="com.congfu.model.Tag">
 	 select id,name,
 	 		count,isDeleted,
  			createTime,updateTime,
  			createMan,updateMan
  		from tag
  		where id=#{id}
  </select> 
  <!-- 根据id 更新 -->
  <update id="update" parameterType="com.congfu.model.Tag">
  	update tag
  	<trim prefix="SET" suffixOverrides=",">
  		<if test="name != null">name=#{name},</if>
  		<if test="count != null"> count=#{count},</if>
  		<if test="isDeleted != null"> isDeleted=#{isDeleted},</if>
  		<if test="updateTime != null"> updateTime=#{updateTime},</if>
  		<if test="updateMan != null"> updateMan=#{updateMan},</if>
  	</trim>
  	where id =#{id}
  </update>
  <!-- 条件查询 -->
   <select id="query" parameterType="com.congfu.model.Tag" resultMap="studentResultMap">
 	 select id,name,
 	 		count,isDeleted,
  			createTime,updateTime,
  			createMan,updateMan
  		from tag
  		<trim prefix="WHERE(" suffix=")" prefixOverrides="AND |OR "> 
		    <if test="name != null">
		       AND  name like CONCAT(CONCAT('',#{name}),'%') 
		    </if>
		     <if test="isDeleted != null">
		       AND  isDeleted=#{isDeleted}
		    </if>
		    <if test="createMan != null">
		       AND  createMan=#{createMan}
		    </if>
  	</trim>
  </select> 
</mapper>















